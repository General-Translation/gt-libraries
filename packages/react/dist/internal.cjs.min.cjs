"use strict";var e=require("react"),r=require("react/jsx-runtime");require("generaltranslation");const t=e=>`Duplicate key found in dictionary: "${e}"`;function n(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t}"function"==typeof SuppressedError&&SuppressedError;var a="en-US",i=["singular","plural","dual","zero","one","two","few","many","other"];const o=e=>`gt-react: No dictionary entry found for id: "${e}"`;const l={variable:"value",number:"n",datetime:"date",currency:"cost"};function s(e="variable"){return l[e]||"variable"}const c="_gt_";function u(e={},r){var t;if(e.name)return e.name;if(e["data-_gt-variable-name"])return e["data-_gt-variable-name"];return`${c}${l[r]||"value"}_${null===(t=e["data-_gt"])||void 0===t?void 0:t.id}`}const d=e=>{var r;if(!e)return"";const{type:t,props:n}=e;if(t&&"function"==typeof t){if("displayName"in t&&"string"==typeof t.displayName&&t.displayName)return t.displayName;if("name"in t&&"string"==typeof t.name&&t.name)return t.name}return t&&"string"==typeof t?t:n.href?"a":(null===(r=n["data-_gt"])||void 0===r?void 0:r.id)?`C${n["data-_gt"].id}`:"function"},p=r=>{return t=r,e.isValidElement(t)?(e=>{const{type:r,props:t}=e;let n={type:d(e),props:{}};if(t["data-_gt"]){const e=t["data-_gt"];let r=Object.assign({},e);const a=e.transformation;if("variable"===a){const r=e.variableType||"variable";return{variable:r,key:u(t,r),id:e.id}}if("plural"===a&&e.branches){n.type="Plural";let t={};Object.entries(e.branches).forEach((([e,r])=>{t[e]=b(r)})),r=Object.assign(Object.assign({},r),{branches:t})}if("branch"===a&&e.branches){n.type="Branch";let t={};Object.entries(e.branches).forEach((([e,r])=>{t[e]=b(r)})),r=Object.assign(Object.assign({},r),{branches:t})}n.props["data-_gt"]=r}return t.children&&(n.props.children=b(t.children)),n})(r):"number"==typeof r?r.toString():r;var t};function b(e){return Array.isArray(e)?e.map(p):p(e)}function f(e,r,t){let n="",o=null;return"number"==typeof e&&!o&&t&&(n=function(e,r,t){void 0===r&&(r=i),void 0===t&&(t=[a]);var n=new Intl.PluralRules(t).select(e),o=Math.abs(e);if(0===o&&r.includes("zero"))return"zero";if(1===o){if(r.includes("singular"))return"singular";if(r.includes("one"))return"one"}if("one"===n&&r.includes("singular"))return"singular";if(2===o){if(r.includes("dual"))return"dual";if(r.includes("two"))return"two"}return"two"===n&&r.includes("dual")?"dual":r.includes(n)?n:"two"===n&&r.includes("dual")?"dual":"two"===n&&r.includes("plural")?"plural":"two"===n&&r.includes("other")?"other":"few"===n&&r.includes("plural")?"plural":"few"===n&&r.includes("other")?"other":"many"===n&&r.includes("plural")?"plural":"many"===n&&r.includes("other")?"other":"other"===n&&r.includes("plural")?"plural":""}(e,Object.keys(t),r)),n&&!o&&(o=t[n]),o}function v(e){var r;const t=(null===(r=e["data-_gt"])||void 0===r?void 0:r.variableType)||"variable";return{variableType:t,variableName:u(e,t),variableValue:void 0!==e.value?e.value:void 0!==e["data-_gt-unformatted-value"]?e["data-_gt-unformatted-value"]:void 0!==e.children?e.children:void 0,variableOptions:(()=>{const r=Object.assign(Object.assign({},e.currency&&{currency:e.currency}),e.options&&Object.assign({},e.options));return Object.keys(r).length?r:"string"==typeof e["data-_gt-variable-options"]?JSON.parse(e["data-_gt-variable-options"]):e["data-_gt-variable-options"]||void 0})()}}function y(e){const r=e;if(r&&"object"==typeof r&&"string"==typeof r.key){const e=Object.keys(r);if(1===e.length)return!0;if(2===e.length){if("number"==typeof r.id)return!0;if("string"==typeof r.variable)return!0}if(3===e.length&&"string"==typeof r.variable&&"number"==typeof r.id)return!0}return!1}function h(e){return e&&e.props&&e.props["data-_gt"]?e.props["data-_gt"]:null}function g({children:r,variables:t={},variablesOptions:i={},defaultLocale:o=a,renderVariable:l}){const u=r=>e.isValidElement(r)?(r=>{const a=h(r);if("variable"===(null==a?void 0:a.transformation)){let{variableName:e,variableType:n,variableValue:a,variableOptions:u}=v(r.props);return a=(()=>{if(void 0!==t[e])return t[e];if(void 0!==a)return a;if(e.startsWith(c)){const e=s(n);if(void 0!==t[e])return t[e]}})(),u=Object.assign(Object.assign({},i[e]),u),l({variableName:e,variableType:n,variableValue:a,variableOptions:u,locales:[o]})}if("plural"===(null==a?void 0:a.transformation)){const e="number"==typeof t.n?t.n:"number"==typeof r.props.n?r.props.n:r.props["data-_gt-n"];"number"==typeof e&&void 0===t.n&&(t.n=e);const n=a.branches||{};return d(f(e,[o],n)||r.props.children)}if("branch"===(null==a?void 0:a.transformation)){let e=r.props,{children:i,name:o,branch:l,"data-_gt":s}=e,c=n(e,["children","name","branch","data-_gt"]);return o=o||r.props["data-_gt-name"]||"branch",l=t[o]||l||r.props["data-_gt-branch-name"],c=a.branches||{},d(void 0!==c[l]?c[l]:i)}return r.props.children?e.cloneElement(r,Object.assign(Object.assign({},r.props),{"data-_gt":void 0,children:d(r.props.children)})):e.cloneElement(r,Object.assign(Object.assign({},r.props),{"data-_gt":void 0}))})(r):r,d=r=>Array.isArray(r)?e.Children.map(r,u):u(r);return d(r)}function m({sourceElement:r,targetElement:t,variables:n={},variablesOptions:i={},locales:o=[a],renderVariable:l}){var s;const{props:c}=r,u=c["data-_gt"],d=null==u?void 0:u.transformation;if("plural"===d){const e="number"==typeof n.n?n.n:"number"==typeof r.props.n?r.props.n:r.props["data-_gt-n"],a=f(e,o,u.branches||{})||r.props.children,s=f(e,o,t.props["data-_gt"].branches||{})||t.props.children;return"number"==typeof e&&void 0===n.n&&(n.n=e),O({source:a,target:s,variables:n,variablesOptions:i,locales:o,renderVariable:l})}if("branch"===d){let{name:e,branch:a,children:s}=c;e=e||r.props["data-_gt-name"]||"branch",a=n[e]||a||r.props["data-_gt-branch-name"];return O({source:(u.branches||{})[a]||s,target:(t.props["data-_gt"].branches||{})[a]||t.props.children,variables:n,variablesOptions:i,locales:o,renderVariable:l})}return(null==c?void 0:c.children)&&(null===(s=t.props)||void 0===s?void 0:s.children)?e.cloneElement(r,Object.assign(Object.assign({},c),{"data-_gt":void 0,children:O({source:c.children,target:t.props.children,variables:n,variablesOptions:i,locales:o,renderVariable:l})})):g({children:r,variables:n,variablesOptions:i,defaultLocale:o[0],renderVariable:l})}function O({source:t,target:n,variables:i={},variablesOptions:o={},locales:l=[a],renderVariable:u}){if(null==n&&t)return g({children:t,variables:i,variablesOptions:o,defaultLocale:l[0],renderVariable:u});if("string"==typeof n)return n;if(Array.isArray(n)&&!Array.isArray(t)&&t&&(t=[t]),Array.isArray(t)&&Array.isArray(n)){const a=t.filter((r=>{if(e.isValidElement(r)){const e=h(r);if(v(r.props),"variable"!==(null==e?void 0:e.transformation))return!0;{let{variableName:e,variableValue:t,variableOptions:n,variableType:a}=v(r.props);void 0===i[e]&&(i[e]=t);const l=s(a);void 0===i[l]&&(i[l]=t),o[e]=Object.assign(Object.assign({},o[e]),n)}}})),d=e=>a.find((r=>{var t,n;const a=h(r);if(void 0!==(null==a?void 0:a.id)){return a.id===(null===(n=null===(t=null==e?void 0:e.props)||void 0===t?void 0:t["data-_gt"])||void 0===n?void 0:n.id)}return!1}));return n.map(((t,n)=>{if("string"==typeof t)return r.jsx(e.Fragment,{children:t},`string_${n}`);if(y(t)){const a=t.key,d=t.variable||"variable",p=(()=>{if(void 0!==i[t.key])return i[t.key];if(a.startsWith(c)){const e=s(d);if(void 0!==i[e])return i[e]}})();return r.jsx(e.Fragment,{children:u({variableType:d,variableName:a,variableValue:p,variableOptions:o[t.key],locales:l})},`var_${n}`)}const a=d(t);return a?r.jsx(e.Fragment,{children:m({sourceElement:a,targetElement:t,variables:i,variablesOptions:o,locales:l,renderVariable:u})},`element_${n}`):void 0}))}if(n&&"object"==typeof n&&!Array.isArray(n)){const r=y(n)?"variable":"element";if(e.isValidElement(t)){if("element"===r)return m({sourceElement:t,targetElement:n,variables:i,variablesOptions:o,locales:l,renderVariable:u});const e=h(t);if("variable"===(null==e?void 0:e.transformation)){let{variableName:e,variableValue:r,variableOptions:n}=v(t.props);void 0===i[e]&&(i[e]=r),o[e]=Object.assign(Object.assign({},o[e]),n)}}if("variable"===r){const e=n,r=e.key,t=e.variable||"variable",a=(()=>{if(void 0!==i[e.key])return i[e.key];if(r.startsWith(c)){const e=s(t);if(void 0!==i[e])return i[e]}})();return u({variableType:t,variableName:r,variableValue:a,variableOptions:o[e.key]||{},locales:l})}}return g({children:t,variables:i,variablesOptions:o,defaultLocale:l[0],renderVariable:u})}const j={method:"default",timeout:"undefined"!=typeof process&&"development"!==process.env.NODE_ENV?8e3:12e3};class _ extends Error{constructor(e,r){super(e),this.error=e,this.code=r,this.code=r}toTranslationError(){return{state:"error",error:this.error,code:this.code}}}exports.GTTranslationError=_,exports.addGTIdentifier=function t(a,o=0){let l=o;const s=e=>{const{type:r,props:a}=e;l+=1;let o,s={id:l};try{o="function"==typeof r&&r.gtTransformation||""}catch(e){o=""}if(o){const r=o.split("-");if("translate"===r[0])throw new Error((e=>{var r;return`General Translation: Nested <T> components. The inner <T> has the id: "${null===(r=null==e?void 0:e.props)||void 0===r?void 0:r.id}".`})(e));if("variable"===r[0]&&(s.variableType=(null==r?void 0:r[1])||"variable"),"plural"===r[0]){const e=Object.entries(a).reduce(((e,[r,n])=>{var a;return a=r,i.includes(a)&&(e[r]=t(n,l)),e}),{});Object.keys(e).length&&(s.branches=e)}if("branch"===r[0]){const e=n(a,["children","branch"]),r=Object.entries(e).reduce(((e,[r,n])=>(e[r]=t(n,l),e)),{});Object.keys(r).length&&(s.branches=r)}s.transformation=r[0]}return s};function c(t){return e.isValidElement(t)?function(t){const{props:n,type:a}=t;if(console.log("TYPE:",a),n["data-_gt"])throw new Error((e=>`General Translation already in use on child with props: ${e.props}. This usually occurs when you nest <T> components within the same file. Remove one of the <T> components to continue.`)(t));let i=s(t),o=Object.assign(Object.assign({},n),{"data-_gt":i});if(n.children&&!i.variableType&&(o.children=u(n.children)),t.type===e.Fragment)return r.jsx("span",Object.assign({style:{all:"unset",display:"contents"}},o));return e.cloneElement(t,o)}(t):t}function u(r){return Array.isArray(r)?e.Children.map(r,c):c(r)}return u(a)},exports.defaultRenderSettings=j,exports.flattenDictionary=function r(n,a=""){const i={};for(const o in n)if(n.hasOwnProperty(o)){const l=a?`${a}.${o}`:o;if("object"!=typeof n[o]||null===n[o]||Array.isArray(n[o])||e.isValidElement(n[o])){if(i.hasOwnProperty(l))throw new Error(t(l));i[l]=n[o]}else{const e=r(n[o],l);for(const r in e){if(i.hasOwnProperty(r))throw new Error(t(r));i[r]=e[r]}}}return i},exports.getDictionaryEntry=function(r,t){let n=r,a=t.split(".");for(const r of a){if("object"!=typeof n||Array.isArray(n)||e.isValidElement(n))return void console.error(o(t));n=n[r]}return n},exports.getEntryAndMetadata=function(e){if(Array.isArray(e)){if(1===e.length)return{entry:e[0]};if(2===e.length)return{entry:e[0],metadata:e[1]}}return{entry:e}},exports.getFallbackVariableName=s,exports.getPluralBranch=f,exports.getVariableName=u,exports.getVariableProps=v,exports.isVariableObject=y,exports.renderDefaultChildren=g,exports.renderSkeleton=function(){return""},exports.renderTranslatedChildren=O,exports.writeChildrenAsObjects=b;
